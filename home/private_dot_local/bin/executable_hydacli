#!/usr/bin/env bash

hydaDir="${XDG_DATA_HOME:-$HOME/.local/share}/hyda"
hydaScript="$hydaDir/bin"
hydaCache="${XDG_CACHE_HOME:-$HOME/.cache}/hyda"

usage() {
  cat <<EOF
Hyda CLI — manage all Hyda project scripts

Usage:
  hydacli <command> [args...]

Commands:
  theme             Manage Hyprland themes
  updater           Launches Updater
  binds             Launches Keybinds Cheat Sheet
  events            Daemon to Dynamically Change Config Based On Events
  devices           Starts Devices Daemon That Notifies of Connected Devices
  battery           Starts Battery Notification Daemon That Notifies of Battery Changes
  screenshot        Takes Screenshot
  gamemode          Toggles Animations and effects for better performance
  reshade           Set Up Reshade for Steam Proton Game 'Credits to kevinlekiller for the script'
  brightness        Changes Brightness
  install           Launches pacman fzf installer
  record            Starts and stops screenrecord
  spotify           spotify daemon for waybar
  audio             audio volume osd
  switch-audio      Changes Audio Output

Examples:
  hydacli theme list
  hydacli audio
  hydacli update
EOF
}

mkdir -p "$hydaCache"

main() {
  local cmd="$1"
  shift || true

  case "$cmd" in
    theme)
      "$hydaScript/hyda-theme.sh" "$@"
      ;;
    switch-audio)
      "$hydaScript/hyda-switch-audio.sh" "$@"
      ;;
    screenshot)
      "$hydaScript/hyda-screenshot.sh" "$@"
      ;;
    update)
      "$hydaScript/hyda-update.sh" "$@"
      ;;
    binds)
      "$hydaScript/hyda-binds.sh" "$@"
      ;;
    gamemode)
      "$hydaScript/hyda-gamemode.sh" "$@"
      ;;
    events)
      "$hydaScript/hyda-events.sh" "$@"
      ;;
    brightness)
      "$hydaScript/hyda-brightness.sh" "$@"
      ;;
    updater)
      "$hydaScript/hyda-updater.sh" "$@"
      ;;
    devices)
      "$hydaScript/hyda-devices.sh" "$@"
      ;;
    battery)
      "$hydaScript/hyda-battery.sh" "$@"
      ;;
    reshade)
      "$hydaScript/hyda-reshade.sh" "$@"
      ;;
    install)
      "$hydaScript/hyda-install.sh" "$@"
      ;;
    record)
      "$hydaScript/hyda-record.sh" "$@"
      ;;
    spotify)
      "$hydaScript/hyda-spotify.sh" "$@"
      ;;
    audio)
      "$hydaScript/hyda-audio.sh" "$@"
      ;;
    ""|-h|--help|help)
      usage
      ;;
    *)
      echo "Unknown command: $cmd" >&2
      usage
      exit 1
      ;;
  esac
}

main "$@"
